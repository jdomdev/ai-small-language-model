# üöÄ Comparador de Modelos de Sentimiento: SLM vs LLM üß†

![Banner del Proyecto](assets/banner.png)

üåü Descripci√≥n del Proyecto

Este proyecto es una aplicaci√≥n interactiva construida con Streamlit que permite comparar el rendimiento y las caracter√≠sticas
de un Modelo de Lenguaje Peque√±o (SLM - Small Language Model) entrenado localmente contra un Modelo de Lenguaje Grande (LLM -
Large Language Model) accesible a trav√©s de la API de inferencia de Hugging Face.

El objetivo principal es demostrar que, para tareas espec√≠ficas y bien definidas como el an√°lisis de sentimiento, los SLM
pueden ofrecer un rendimiento comparable al de los LLM, pero con ventajas significativas en t√©rminos de:

  * ‚ö° Agilidad y Velocidad: Los SLM son m√°s r√°pidos en inferencia.
  * üí∞ Eficiencia de Costos: Requieren menos recursos computacionales, lo que se traduce en menores costos de operaci√≥n.
  * ‚ôªÔ∏è Consumo de Recursos: Utilizan menos memoria y CPU/GPU, siendo ideales para despliegues en entornos con recursos limitados o
    en el "edge".
  * üéØ Especializaci√≥n (Microservicios de IA): Al igual que los microservicios en el desarrollo de software, los SLM pueden ser
    entrenados y optimizados para una tarea muy concreta, haci√©ndolos extremadamente eficientes y precisos en su dominio, sin la
    sobrecarga de un modelo de prop√≥sito general.

En resumen, este proyecto busca ilustrar por qu√©, en muchos escenarios del mundo real, un SLM especializado puede ser una
soluci√≥n m√°s pr√°ctica, econ√≥mica y eficiente que un LLM masivo.

‚ú® Caracter√≠sticas Destacadas

  * Comparaci√≥n en Tiempo Real: Analiza el sentimiento de rese√±as de pel√≠culas simult√°neamente con ambos tipos de modelos.
  * SLM Local: Utiliza un modelo DistilBERT fine-tuned para an√°lisis de sentimiento, cargado y ejecutado directamente en tu
    m√°quina.
  * LLM Remoto (Hugging Face API): Permite seleccionar y probar diferentes LLM de instrucci√≥n disponibles a trav√©s de la API de
    inferencia gratuita de Hugging Face.
  * Gesti√≥n de Archivos Grandes: Implementa Git LFS para manejar eficientemente el modelo SLM de gran tama√±o, manteniendo el
    repositorio ligero.
  * Interfaz Intuitiva: Desarrollado con Streamlit para una experiencia de usuario sencilla y visual.

üõ†Ô∏è Tecnolog√≠as Utilizadas

  * Python 3.8+
  * Streamlit: Para la interfaz de usuario interactiva.
  * Hugging Face Transformers: Para la carga y uso del SLM.
  * Hugging Face Inference API: Para la interacci√≥n con los LLM remotos.
  * Git LFS (Large File Storage): Para la gesti√≥n de archivos grandes.
  * `python-dotenv`: Para la gesti√≥n segura de variables de entorno (tokens).
  * `requests`: Para realizar peticiones HTTP a la API de Hugging Face.

---

üöÄ Gu√≠a de Usuario: ¬°Manos a la Obra!

Esta secci√≥n es CR√çTICA para que puedas poner en marcha el proyecto sin problemas. Sigue los pasos cuidadosamente.

1. üì¶ Pre-requisitos Esenciales

Antes de clonar el repositorio, aseg√∫rate de tener instaladas las siguientes herramientas:

  * Git: El sistema de control de versiones.
  * Python 3.8 o superior: El lenguaje de programaci√≥n.
  * Git LFS (Large File Storage): ¬°MUY IMPORTANTE! Esta herramienta es fundamental para manejar el modelo SLM de 260MB. Si no la
    tienes instalada antes de clonar, Git descargar√° archivos "puntero" en lugar del modelo real, y la aplicaci√≥n no funcionar√°.

1.1. ‚úÖ Verificar Instalaci√≥n de Git LFS

Abre tu terminal (o Git Bash en Windows) y ejecuta:

    git-lfs --version

Si ves un n√∫mero de versi√≥n (ej. git-lfs/3.4.1), ¬°excelente! Ya lo tienes. Si no, sigue las instrucciones de instalaci√≥n a
continuaci√≥n.

1.2. ‚¨áÔ∏è Instalaci√≥n de Git LFS (Global)

üåê Para Linux (Ubuntu/Debian):

    # Actualiza la lista de paquetes
    sudo apt-get update
    # Instala Git LFS
    sudo apt-get install git-lfs

üçé Para macOS (usando Homebrew):

    # Instala Homebrew si no lo tienes: /bin/bash -c "$(curl -fsSL
    # https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    brew install git-lfs

ü™ü Para Windows (usando Git Bash):

La forma m√°s sencilla es descargar e instalar el instalador de Git for Windows.

  1. Descarga el instalador desde: https://git-scm.com/download/win (https://git-scm.com/download/win)
  2. Ejecuta el instalador.
  3. Durante el proceso de instalaci√≥n, en la pantalla "Select Components", aseg√∫rate de que la casilla "Git LFS (Large File
     Support)" est√© marcada. Suele estarlo por defecto.
  4. Completa la instalaci√≥n con las opciones predeterminadas.

1.3. üóëÔ∏è Desinstalaci√≥n de Git LFS (Global)

Si en alg√∫n momento necesitas desinstalar Git LFS de tu sistema:

üåê Para Linux (Ubuntu/Debian):

    sudo apt-get remove git-lfs

üçé Para macOS (usando Homebrew):

    brew uninstall git-lfs

ü™ü Para Windows:

Git LFS se desinstala como cualquier otro programa de Windows:
  1. Ve a "Panel de control" -> "Programas" -> "Programas y caracter√≠sticas".
  2. Busca "Git" o "Git LFS" en la lista, selecci√≥nalo y haz clic en "Desinstalar".

---

2. ‚¨áÔ∏è Clonar el Repositorio

Una vez que Git LFS est√© instalado globalmente en tu sistema, puedes clonar el repositorio.

    # Abre tu terminal y navega al directorio donde quieres guardar el proyecto
    cd /ruta/a/tu/directorio/de/proyectos

    # Clona el repositorio (aseg√∫rate de usar la URL de TU fork)
    git clone git@github.com:tu_usuario/ai-small-language-model.git
    # O si usas HTTPS:
    # git clone https://github.com/tu_usuario/ai-small-language-model.git

    # Navega al directorio del proyecto
    cd ai-small-language-model

‚ö†Ô∏è Aviso Importante: ¬øQu√© pasa si clon√© SIN Git LFS?

Si por alguna raz√≥n clonaste el repositorio antes de instalar Git LFS, el archivo
**fine_tuned_sentiment_model_full_data/model.safetensors** ser√° un peque√±o archivo de texto (un "puntero") en lugar del modelo
real.

Para solucionarlo, despu√©s de instalar Git LFS globalmente, navega a la ra√≠z del proyecto y ejecuta:

    git lfs pull

Esto forzar√° a Git LFS a descargar los archivos grandes reales.

---

3. ‚öôÔ∏è Configuraci√≥n del Entorno

Ahora que tienes el c√≥digo, configura el entorno de Python.

3.1. üêç Crear y Activar Entorno Virtual

Es una buena pr√°ctica usar entornos virtuales para aislar las dependencias del proyecto.

    # Crea un entorno virtual (solo la primera vez)
    python3 -m venv .venv

    # Activa el entorno virtual
    # En Linux/macOS:
    source .venv/bin/activate
    # En Windows (Git Bash):
    source .venv/Scripts/activate

3.2. üì¶ Instalar Dependencias

Con el entorno virtual activado, instala todas las librer√≠as necesarias:

    pip install -r requirements.txt

3.3. üîë Configuraci√≥n del Token de Hugging Face (.env)

Para que la aplicaci√≥n pueda comunicarse con los LLM de Hugging Face, necesitas un token de acceso.

  1. Obt√©n tu Token:
        * Ve a Hugging Face Settings (https://huggingface.co/settings/tokens).
        * Crea un nuevo token con rol "read" (lectura).
        * Copia el token.

  2. Crea el archivo `.env`:
        * En la ra√≠z de tu proyecto (ai-small-language-model/), crea un archivo llamado .env.
        * Abre este archivo y a√±ade la siguiente l√≠nea, reemplazando `hf_YOUR_REAL_TOKEN_HERE` con tu token real:

      HF_TOKEN="hf_YOUR_REAL_TOKEN_HERE"

        * ¬°IMPORTANTE! El archivo .env est√° en el .gitignore para que nunca se suba a tu repositorio p√∫blico. ¬°Mant√©n tu token en
          secreto!

3.4. ü§ù Aceptar T√©rminos de Modelos (¬°Crucial para Llama 3!)

Si planeas usar el modelo meta-llama/Meta-Llama-3-8B-Instruct (o cualquier otro modelo "gated"), DEBES ir a la p√°gina del modelo
  en Hugging Face y aceptar sus t√©rminos y condiciones. Sin este paso, tu token no tendr√° permiso para acceder a la API de
inferencia de ese modelo.

  * P√°gina de Llama 3 8B Instruct: https://huggingface.co/meta-llama/Meta-Llama-3-8B-Instruct
    (https://huggingface.co/meta-llama/Meta-Llama-3-8B-Instruct)

---

4. üöÄ Inicializar Git LFS en el Repositorio

Aunque ya lo instalaste globalmente, necesitas asegurarte de que tu repositorio local est√© configurado para usar LFS.

    # Aseg√∫rate de estar en la ra√≠z de tu proyecto (donde est√° .git)
    git lfs install

---

5. ‚ûï Seguimiento de Archivos Grandes con Git LFS

Si vas a realizar desarrollos en el proyecto o necesitas asegurar que Git LFS haga un seguimiento expl√≠cito del modelo principal, ejecuta el siguiente comando **despu√©s de clonar el repositorio e inicializar Git LFS**:

    git lfs track "fine_tuned_sentiment_model_full_data/model.safetensors"

Este comando le indica a Git LFS que debe gestionar el archivo `model.safetensors` de forma especial, almacenando solo un "puntero" en el repositorio de Git y el contenido real del archivo en el servidor de LFS. Esto es **esencial** para manejar archivos pesados como modelos de IA, ya que mantiene el repositorio de Git ligero y acelera las operaciones de clonado y descarga para otros desarrolladores.

Si realizas cambios en el modelo o a√±ades nuevos archivos grandes que desees que LFS gestione, deber√°s ejecutar `git lfs track` para cada uno de ellos. Una vez que un archivo est√° siendo "trackeado", cualquier `git add` y `git commit` lo procesar√° correctamente a trav√©s de LFS. Este paso es necesario para que, al subir tus cambios a tu fork y luego hacer una pull request, el archivo pesado sea gestionado correctamente por LFS, permitiendo a otros clonar y acceder al modelo sin problemas.

---

6. ‚ñ∂Ô∏è Ejecutar la Aplicaci√≥n Streamlit

¬°Todo listo! Ahora puedes iniciar la aplicaci√≥n.

    # Aseg√∫rate de que tu entorno virtual est√© activado
    streamlit run app.py

Esto abrir√° la aplicaci√≥n en tu navegador web (normalmente en http://localhost:8501).

---

7. üñ•Ô∏è Uso de la Interfaz

Una vez que la aplicaci√≥n est√© abierta en tu navegador:

  1. Selector de LLM: En la parte superior, ver√°s un desplegable donde puedes seleccionar el LLM de Hugging Face que deseas usar
     para la comparaci√≥n.
  2. √Årea de Texto: Introduce la rese√±a de la pel√≠cula en ingl√©s que deseas analizar.
  3. Bot√≥n "Analizar Sentimiento": Haz clic en este bot√≥n para que ambos modelos (tu SLM local y el LLM seleccionado en la nube)
     procesen la rese√±a.
  4. Resultados: Ver√°s los resultados de ambos modelos, mostrando su predicci√≥n de sentimiento (POSITIVO/NEGATIVO) y, en el caso
     del SLM, la confianza.

---

üìÇ Estructura del Proyecto

    .
    ‚îú‚îÄ‚îÄ .streamlit/             # Configuraci√≥n de Streamlit (ej. secrets.toml si se usara)
    ‚îú‚îÄ‚îÄ fine_tuned_sentiment_model_full_data/ # üß† Directorio del modelo SLM (gestionado por Git LFS)
    ‚îÇ   ‚îú‚îÄ‚îÄ config.json
    ‚îÇ   ‚îú‚îÄ‚îÄ model.safetensors       # Archivo de modelo grande
    ‚îÇ   ‚îú‚îÄ‚îÄ special_tokens_map.json
    ‚îÇ   ‚îú‚îÄ‚îÄ tokenizer_config.json
    ‚îÇ   ‚îú‚îÄ‚îÄ tokenizer.json
    ‚îÇ   ‚îî‚îÄ‚îÄ vocab.txt
    ‚îú‚îÄ‚îÄ .env                    # üîë Archivo para variables de entorno (NO SUBIR A GIT)
    ‚îú‚îÄ‚îÄ .gitattributes          # üîó Configuraci√≥n de Git LFS
    ‚îú‚îÄ‚îÄ .gitignore              # üö´ Archivos y directorios ignorados por Git
    ‚îú‚îÄ‚îÄ app.py                  # üöÄ Aplicaci√≥n principal de Streamlit
    ‚îú‚îÄ‚îÄ ejem.py                 # (Archivo de ejemplo, puedes eliminarlo si no lo usas)
    ‚îú‚îÄ‚îÄ README.md               # üìÑ Este mismo archivo
    ‚îú‚îÄ‚îÄ requirements.txt        # üìã Dependencias de Python
    ‚îú‚îÄ‚îÄ train_sentiment_colab_full_data.py # Script de entrenamiento (Colab)
    ‚îú‚îÄ‚îÄ train_sentiment_model.py  # Script de entrenamiento
    ‚îî‚îÄ‚îÄ .venv/                  # üêç Entorno virtual de Python

---

‚ö†Ô∏è **Nota para Compa√±eros: Seguimiento de Archivos Grandes con Git LFS**

El seguimiento con Git LFS se aplica espec√≠ficamente a los archivos grandes declarados en el `.gitattributes`. En este proyecto, el archivo principal que Git LFS gestiona es **`fine_tuned_sentiment_model_full_data/model.safetensors`**.

Aunque veas la carpeta `fine_tuned_sentiment_model_full_data/`, Git LFS no "sigue" la carpeta entera en el sentido tradicional. En su lugar, el `.gitattributes` especifica que el archivo `.safetensors` (o `model.safetensors` directamente) dentro de esa carpeta debe ser tratado por LFS. Esto significa que cuando t√∫ (o tus compa√±eros) clon√°is o hac√©is un `git pull`, si Git LFS est√° correctamente configurado e inicializado (`git lfs install`), los archivos grandes se descargar√°n autom√°ticamente. No es necesario realizar un seguimiento manual de la carpeta completa, solo asegurarse de que el archivo del modelo est√© configurado para LFS, lo cual ya est√° hecho en el repositorio. Si por alguna raz√≥n los archivos no se descargan correctamente (como se explica en la secci√≥n "Aviso Importante: ¬øQu√© pasa si clon√© SIN Git LFS?"), el comando `git lfs pull` resolver√° el problema, trayendo espec√≠ficamente los contenidos de los archivos grandes que LFS gestiona.

---

ü§ù Contribuci√≥n

¬°Las contribuciones son bienvenidas! Si deseas mejorar este proyecto, por favor:

  1. Haz un fork del repositorio.
  2. Crea una nueva rama (git checkout -b feature/nueva-funcionalidad).
  3. Realiza tus cambios y commitea (git commit -m 'feat: A√±ade nueva funcionalidad').
  4. Sube tu rama (git push origin feature/nueva-funcionalidad).
  5. Abre un Pull Request.

---

üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT. Consulta el archivo LICENSE para m√°s detalles.

---

üìß Contacto

¬øPreguntas o sugerencias? No dudes en contactarme:

  * Nombre: Juan domingo
  * GitHub: (https://github.com/jdomdev)
